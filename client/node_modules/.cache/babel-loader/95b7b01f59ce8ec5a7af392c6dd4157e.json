{"ast":null,"code":"import _asyncToGenerator from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{Button,Form,FormGroup,Label,Input,Row,Col,Alert,Progress}from'reactstrap';import'./OrderTicketForm.scss';import SeatChooser from'./../SeatChooser/SeatChooserContainer';import{loadSeats}from'../../../redux/seatsRedux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderTicketForm=/*#__PURE__*/function(_React$Component){_inherits(OrderTicketForm,_React$Component);var _super=_createSuper(OrderTicketForm);function OrderTicketForm(){var _this;_classCallCheck(this,OrderTicketForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={order:{client:'',email:'',day:1,seat:''},isError:false};_this.updateSeat=function(e,seatId){var order=_this.state.order;e.preventDefault();_this.setState({order:_objectSpread(_objectSpread({},order),{},{seat:seatId})});};_this.updateTextField=function(_ref){var target=_ref.target;var order=_this.state.order;var value=target.value,name=target.name;_this.setState({order:_objectSpread(_objectSpread({},order),{},_defineProperty({},name,value))});};_this.updateNumberField=function(_ref2){var target=_ref2.target;var order=_this.state.order;var value=target.value,name=target.name;_this.setState({order:_objectSpread(_objectSpread({},order),{},_defineProperty({},name,parseInt(value)))});};_this.submitForm=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var order,_this$props,addSeat,loadSeats;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:order=_this.state.order;_this$props=_this.props,addSeat=_this$props.addSeat,loadSeats=_this$props.loadSeats;e.preventDefault();if(!(order.client&&order.email&&order.day&&order.seat)){_context.next=10;break;}_context.next=6;return addSeat(order);case 6:loadSeats();_this.setState({order:{client:'',email:'',day:1,seat:''},isError:false});_context.next=11;break;case 10:_this.setState({isError:true});case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}();return _this;}_createClass(OrderTicketForm,[{key:\"render\",value:/*\r\n  Client ---> server\r\n  server sprawdza czy moze zajac\r\n  client <--- server\r\n\r\n  client <---> server <----> db\r\n  */function render(){var updateSeat=this.updateSeat,updateTextField=this.updateTextField,updateNumberField=this.updateNumberField,submitForm=this.submitForm;var requests=this.props.requests;var _this$state=this.state,order=_this$state.order,isError=_this$state.isError;return/*#__PURE__*/_jsx(Form,{className:\"order-ticket-form\",onSubmit:submitForm,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:\"12\",md:\"6\",children:[isError&&/*#__PURE__*/_jsx(Alert,{color:\"warning\",children:\"There are some errors in you form. Have you fill all the fields? Maybe you forgot to choose your seat?\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].error&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:requests['ADD_SEAT'].error}),requests['ADD_SEAT']&&requests['ADD_SEAT'].success&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"success\",children:\"You've booked your ticket! Check you email in order to make a payment.\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].pending&&/*#__PURE__*/_jsx(Progress,{animated:true,className:\"mb-5\",color:\"primary\",value:75}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:order.client,name:\"client\",onChange:updateTextField,id:\"clientName\",placeholder:\"John Doe\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",value:order.email,name:\"email\",onChange:updateTextField,id:\"clientEmail\",placeholder:\"johndoe@example.com\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientDay\",children:\"Select which day of festivals are you interested in:\"}),/*#__PURE__*/_jsxs(Input,{type:\"select\",value:order.day,name:\"day\",onChange:updateNumberField,id:\"exampleSelect\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"3\"})]}),/*#__PURE__*/_jsx(\"small\",{id:\"dayHelp\",className:\"form-text text-muted\",children:\"Every day of the festival uses individual ticket. You can book only one ticket at the time.\"})]}),/*#__PURE__*/_jsx(FormGroup,{check:true,children:/*#__PURE__*/_jsxs(Label,{check:true,children:[/*#__PURE__*/_jsx(Input,{required:true,type:\"checkbox\"}),\" I agree with \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Terms and conditions\"}),\" and \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Privacy Policy\"}),\".\"]})}),/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"mt-3\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Col,{xs:\"12\",md:\"6\",children:/*#__PURE__*/_jsx(SeatChooser,{chosenDay:order.day,chosenSeat:order.seat,updateSeat:updateSeat})})]})});}}]);return OrderTicketForm;}(React.Component);export default OrderTicketForm;","map":{"version":3,"sources":["/Users/yevgeniywyszynski/wlasnyserver/client/src/components/features/OrderTicketForm/OrderTicketForm.js"],"names":["React","Button","Form","FormGroup","Label","Input","Row","Col","Alert","Progress","SeatChooser","loadSeats","OrderTicketForm","state","order","client","email","day","seat","isError","updateSeat","e","seatId","preventDefault","setState","updateTextField","target","value","name","updateNumberField","parseInt","submitForm","props","addSeat","requests","error","success","pending","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Form, FormGroup, Label, Input, Row, Col, Alert, Progress } from 'reactstrap';\r\n\r\nimport './OrderTicketForm.scss';\r\nimport SeatChooser from './../SeatChooser/SeatChooserContainer';\r\nimport { loadSeats } from '../../../redux/seatsRedux';\r\n\r\nclass OrderTicketForm extends React.Component {\r\n\r\n  state = {\r\n    order: {\r\n      client: '',\r\n      email: '',\r\n      day: 1,\r\n      seat: '',\r\n    },\r\n    isError: false,\r\n  }\r\n\r\n  updateSeat = (e, seatId) => {\r\n    const { order } = this.state;\r\n\r\n    e.preventDefault();\r\n    this.setState({ order: { ...order, seat: seatId }});\r\n  }\r\n\r\n  updateTextField = ({ target }) => {\r\n    const { order } = this.state;\r\n    const { value, name } = target;\r\n\r\n    this.setState({ order: { ...order, [name]: value }});\r\n  }\r\n\r\n  updateNumberField = ({ target }) => {\r\n    const { order } = this.state;\r\n    const { value, name } = target;\r\n\r\n    this.setState({ order: { ...order, [name]: parseInt(value) }});\r\n  }\r\n\r\n  submitForm = async (e) => {\r\n    const { order } = this.state;\r\n    const { addSeat, loadSeats } = this.props;\r\n\r\n    e.preventDefault();\r\n\r\n    if(order.client && order.email && order.day && order.seat) {\r\n      await addSeat(order);\r\n      loadSeats();\r\n      this.setState({ \r\n        order: {\r\n          client: '',\r\n          email: '',\r\n          day: 1,\r\n          seat: '',\r\n        },\r\n        isError: false,\r\n      });\r\n\r\n    } else {\r\n      this.setState({ isError: true });\r\n    }\r\n  }\r\n  /*\r\n  Client ---> server\r\n  server sprawdza czy moze zajac\r\n  client <--- server\r\n\r\n  client <---> server <----> db\r\n  */\r\n\r\n  render() {\r\n\r\n    const { updateSeat, updateTextField, updateNumberField, submitForm } = this;\r\n    const { requests } = this.props;\r\n    const { order, isError } = this.state;\r\n\r\n    return (\r\n      <Form className=\"order-ticket-form\" onSubmit={submitForm}>\r\n        <Row>\r\n          <Col xs=\"12\" md=\"6\">\r\n            { (isError) && <Alert color=\"warning\">There are some errors in you form. Have you fill all the fields? Maybe you forgot to choose your seat?</Alert> }\r\n            { (requests['ADD_SEAT'] && requests['ADD_SEAT'].error && !isError) && <Alert color=\"danger\">{requests['ADD_SEAT'].error}</Alert> }\r\n            { (requests['ADD_SEAT'] && requests['ADD_SEAT'].success && !isError) && <Alert color=\"success\">You've booked your ticket! Check you email in order to make a payment.</Alert> }\r\n            { (requests['ADD_SEAT'] && requests['ADD_SEAT'].pending) && <Progress animated className=\"mb-5\" color=\"primary\" value={75} /> }\r\n            <FormGroup>\r\n              <Label for=\"clientEmail\">Name</Label>\r\n              <Input type=\"text\" value={order.client} name=\"client\" onChange={updateTextField} id=\"clientName\" placeholder=\"John Doe\" />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"clientEmail\">Email</Label>\r\n              <Input type=\"email\" value={order.email} name=\"email\" onChange={updateTextField} id=\"clientEmail\" placeholder=\"johndoe@example.com\" />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"clientDay\">Select which day of festivals are you interested in:</Label>\r\n              <Input type=\"select\" value={order.day} name=\"day\" onChange={updateNumberField} id=\"exampleSelect\">\r\n                <option>1</option>\r\n                <option>2</option>\r\n                <option>3</option>\r\n              </Input>\r\n              <small id=\"dayHelp\" className=\"form-text text-muted\">Every day of the festival uses individual ticket. You can book only one ticket at the time.</small>\r\n            </FormGroup>\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input required type=\"checkbox\" /> I agree with <a href=\"#\">Terms and conditions</a> and <a href=\"#\">Privacy Policy</a>.\r\n              </Label>\r\n            </FormGroup>\r\n            <Button color=\"primary\" className=\"mt-3\">Submit</Button>\r\n          </Col>\r\n          <Col xs=\"12\" md=\"6\">\r\n            <SeatChooser \r\n              chosenDay={order.day}\r\n              chosenSeat={order.seat} \r\n              updateSeat={updateSeat} />\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    )\r\n  };\r\n}\r\n\r\nexport default OrderTicketForm;"]},"metadata":{},"sourceType":"module"}