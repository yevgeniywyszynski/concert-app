{"ast":null,"code":"import _defineProperty from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/yevgeniywyszynski/wlasnyserver/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{API_URL}from'../config';/* SELECTORS */export var getSeats=function getSeats(_ref){var seats=_ref.seats;return seats.data;};export var getRequests=function getRequests(_ref2){var seats=_ref2.seats;return seats.requests;};/* ACTIONS */ // action name creator\nvar reducerName='seats';var createActionName=function createActionName(name){return\"app/\".concat(reducerName,\"/\").concat(name);};var START_REQUEST=createActionName('START_REQUEST');var END_REQUEST=createActionName('END_REQUEST');var ERROR_REQUEST=createActionName('ERROR_REQUEST');var LOAD_SEATS=createActionName('LOAD_SEATS');var ADD_SEAT=createActionName('ADD_SEAT');export var startRequest=function startRequest(payload){return{payload:payload,type:START_REQUEST};};export var endRequest=function endRequest(payload){return{payload:payload,type:END_REQUEST};};export var errorRequest=function errorRequest(payload){return{payload:payload,type:ERROR_REQUEST};};export var loadSeats=function loadSeats(payload){return{payload:payload,type:LOAD_SEATS};};export var addSeat=function addSeat(payload){return{payload:payload,type:ADD_SEAT};};/* THUNKS */export var loadSeatsRequest=function loadSeatsRequest(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(startRequest({name:'LOAD_SEATS'}));_context.prev=1;_context.next=4;return axios.get(\"\".concat(API_URL,\"/seats\"));case 4:res=_context.sent;_context.next=7;return new Promise(function(resolve){return setTimeout(resolve,2000);});case 7:dispatch(loadSeats(res.data));dispatch(endRequest({name:'LOAD_SEATS'}));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch(errorRequest({name:'LOAD_SEATS',error:_context.t0.message}));case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x){return _ref3.apply(this,arguments);};}();};export var addSeatRequest=function addSeatRequest(seat){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(startRequest({name:'ADD_SEAT'}));_context2.prev=1;_context2.next=4;return axios.post(\"\".concat(API_URL,\"/seats\"),seat);case 4:res=_context2.sent;_context2.next=7;return new Promise(function(resolve){return setTimeout(resolve,1000);});case 7:dispatch(addSeat(res));dispatch(endRequest({name:'ADD_SEAT'}));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch(errorRequest({name:'ADD_SEAT',error:_context2.t0.message}));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};/* INITIAL STATE */var initialState={data:[],requests:[]};/* REDUCER */export default function reducer(){var statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case LOAD_SEATS:return _objectSpread(_objectSpread({},statePart),{},{data:_toConsumableArray(action.payload)});case ADD_SEAT:return _objectSpread(_objectSpread({},statePart),{},{data:[].concat(_toConsumableArray(statePart.data),[action.payload])});case START_REQUEST:return _objectSpread(_objectSpread({},statePart),{},{requests:_objectSpread(_objectSpread({},statePart.requests),{},_defineProperty({},action.payload.name,{pending:true,error:null,success:false}))});case END_REQUEST:return _objectSpread(_objectSpread({},statePart),{},{requests:_objectSpread(_objectSpread({},statePart.requests),{},_defineProperty({},action.payload.name,{pending:false,error:null,success:true}))});case ERROR_REQUEST:return _objectSpread(_objectSpread({},statePart),{},{requests:_objectSpread(_objectSpread({},statePart.requests),{},_defineProperty({},action.payload.name,{pending:false,error:action.payload.error,success:false}))});default:return statePart;}}","map":{"version":3,"sources":["/Users/yevgeniywyszynski/wlasnyserver/client/src/redux/seatsRedux.js"],"names":["axios","API_URL","getSeats","seats","data","getRequests","requests","reducerName","createActionName","name","START_REQUEST","END_REQUEST","ERROR_REQUEST","LOAD_SEATS","ADD_SEAT","startRequest","payload","type","endRequest","errorRequest","loadSeats","addSeat","loadSeatsRequest","dispatch","get","res","Promise","resolve","setTimeout","error","message","addSeatRequest","seat","post","initialState","reducer","statePart","action","pending","success"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { API_URL } from '../config';\r\n\r\n/* SELECTORS */\r\nexport const getSeats = ({ seats }) => seats.data;\r\nexport const getRequests = ({ seats }) => seats.requests;\r\n\r\n/* ACTIONS */\r\n\r\n// action name creator\r\nconst reducerName = 'seats';\r\nconst createActionName = name => `app/${reducerName}/${name}`;\r\n\r\nconst START_REQUEST = createActionName('START_REQUEST');\r\nconst END_REQUEST = createActionName('END_REQUEST');\r\nconst ERROR_REQUEST = createActionName('ERROR_REQUEST');\r\n\r\nconst LOAD_SEATS = createActionName('LOAD_SEATS');\r\nconst ADD_SEAT = createActionName('ADD_SEAT');\r\n\r\nexport const startRequest = payload => ({ payload, type: START_REQUEST });\r\nexport const endRequest = payload => ({ payload, type: END_REQUEST });\r\nexport const errorRequest = payload => ({ payload, type: ERROR_REQUEST });\r\n\r\nexport const loadSeats = payload => ({ payload, type: LOAD_SEATS });\r\nexport const addSeat = payload => ({ payload, type: ADD_SEAT });\r\n\r\n/* THUNKS */\r\n\r\nexport const loadSeatsRequest = () => {\r\n  return async dispatch => {\r\n\r\n    dispatch(startRequest({ name: 'LOAD_SEATS' }));\r\n    try {\r\n\r\n      let res = await axios.get(`${API_URL}/seats`);\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n      dispatch(loadSeats(res.data));\r\n      dispatch(endRequest({ name: 'LOAD_SEATS' }));\r\n\r\n    } catch(e) {\r\n      dispatch(errorRequest({ name: 'LOAD_SEATS', error: e.message }));\r\n    }\r\n\r\n  };\r\n};\r\n\r\nexport const addSeatRequest = (seat) => {\r\n  return async dispatch => {\r\n\r\n    dispatch(startRequest({ name: 'ADD_SEAT' }));\r\n    try {\r\n\r\n      let res = await axios.post(`${API_URL}/seats`, seat);\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n      dispatch(addSeat(res));\r\n      dispatch(endRequest({ name: 'ADD_SEAT' }));\r\n\r\n    } catch(e) {\r\n      dispatch(errorRequest({ name: 'ADD_SEAT', error: e.message }));\r\n    }\r\n\r\n  };\r\n};\r\n\r\n/* INITIAL STATE */\r\n\r\nconst initialState = {\r\n  data: [],\r\n  requests: [],\r\n};\r\n\r\n/* REDUCER */\r\n\r\nexport default function reducer(statePart = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case LOAD_SEATS: \r\n      return { ...statePart, data: [...action.payload] };\r\n    case ADD_SEAT: \r\n      return { ...statePart, data: [...statePart.data, action.payload] }\r\n    case START_REQUEST:\r\n      return { ...statePart, requests: {...statePart.requests, [action.payload.name]: { pending: true, error: null, success: false }} };\r\n    case END_REQUEST:\r\n      return { ...statePart, requests: { ...statePart.requests, [action.payload.name]: { pending: false, error: null, success: true }} };\r\n    case ERROR_REQUEST:\r\n      return { ...statePart, requests: { ...statePart.requests, [action.payload.name]: { pending: false, error: action.payload.error, success: false }} };\r\n    default:\r\n      return statePart;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}